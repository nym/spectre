        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>Handle class / handle_system Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="handle_system" data-type="Handle">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../handle_system.html">handle_system</a> &rsaquo; <a href="../handle_system/Handle.html">Handle</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
<h2><div class="icon-library"></div><a href="../handle_system.html">handle_system</a></h2><ul class="icon">
<li><div class="icon-class"></div><strong>Handle</strong></li>
<li><a href="../handle_system/HandleSystem.html"><div class="icon-class"></div>HandleSystem</a></li>
</ul>
<h2><div class="icon-library"></div><a href="../profiler.html">profiler</a></h2><h2><div class="icon-library"></div><a href="../spectre.html">spectre</a></h2><h2><div class="icon-library"></div><a href="../vector_math_browser.html">vector_math_browser</a></h2></div>
<div class="content">
        <h2><strong>Handle</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<pre class="source">
class Handle {
 // Handle fits in 32-bits
 // 20 bits for index (1MB of handles)
 static const int IndexMask = 0xFFFFF;
 static const int IndexShift = 0;
 // 4 bits for a serial number
 static const int SerialMask = 0xF;
 static const int SerialShift = 20;
 // 4 bits for a type
 static const int TypeMask = 0xF;
 static const int TypeShift = 24;
 // 4 bits for a status
 static const int StatusMask = 0xF;
 static const int StatusShift = 28;

 static const int StatusUsed = 0x1;
 static const int StatusFreeList = 0x2;
 static const int StatusReg = 0x4;

 static const int BadHandle = 0xFFFFFFFF;

 static int getStatus(int handle) {
   return (handle &gt;&gt; StatusShift) &amp; StatusMask;
 }

 static int getType(int handle) {
   return (handle &gt;&gt; TypeShift) &amp; TypeMask;
 }

 static int getSerial(int handle) {
   return (handle &gt;&gt; SerialShift) &amp; SerialMask;
 }

 static int getIndex(int handle) {
   return (handle &gt;&gt; IndexShift) &amp; IndexMask;
 }

 static int nextSerial(int handle) {
   int index = getIndex(handle);
   int serial = getSerial(handle);
   int type = getType(handle);
   int status = getStatus(handle);

   serial = (serial+1) &amp; SerialMask;
   if (serial == SerialMask) {
     // We skip over SerialMask
     // Currently that leaves about 15 serial numbers
     serial = 0;
   }
   return makeHandle(index, serial, type, status);
 }

 static int setType(int handle, int type) {
   int index = getIndex(handle);
   int serial = getSerial(handle);
   int status = getStatus(handle);
   return makeHandle(index, serial, type, status);
 }

 static int setIndex(int handle, int index) {
   int serial = getSerial(handle);
   int type = getType(handle);
   int status = getStatus(handle);
   return makeHandle(index, serial, type, status);
 }

 static int setStatusFlag(int handle, int flag) {
   int bit = flag &lt;&lt; StatusShift;
   return handle|bit;
 }

 static int clearStatusFlag(int handle, int flag) {
   int bit = flag &lt;&lt; StatusShift;
   handle &amp;= ~bit;
   return handle;
 }

 static bool checkStatusFlag(int handle, int flag) {
   return (Handle.getStatus(handle) &amp; flag) != 0;
 }

 static int makeHandle(int index, int serial, int type, int status) {
   index = index &amp; IndexMask;
   index = index &lt;&lt; IndexShift;
   serial = serial &amp; SerialMask;
   serial = serial &lt;&lt; SerialShift;
   type = type &amp; TypeMask;
   type = type &lt;&lt; TypeShift;
   status = status &amp; StatusMask;
   status = status &lt;&lt; StatusShift;
   return index|serial|type|status;
 }

 // A static handle has a serial of SerialMask
 static int makeStaticHandle(int index, int type, int status) {
   return makeHandle(index, SerialMask, type, status);
 }

 static bool isStaticHandle(int handle) {
   int serial = getSerial(handle);
   return serial == SerialMask;
 }

 // A register handle is a special handle used by the interpreter
 //
 static int makeRegisterHandle(int register) {
   return makeHandle(register, 0, 0, Handle.StatusReg);
 }

 static bool isRegisterHandle(int handle) {
   return (getStatus(handle) &amp; StatusReg) != 0;
 }

 // A next pointer has the status flag StatusFreeList
 static int makeNextPointer(int serial, int nextIndex) {
   return makeHandle(nextIndex, serial, 0, StatusFreeList);
 }

 static bool isNextPointer(int handle) {
   int status = getStatus(handle);
   return status == StatusFreeList;
 }
}
</pre>
</div>
<div>
<h3>Static Properties</h3>
<div class="field"><h4 id="BadHandle">
<button class="show-code">Code</button>
const int         <strong>BadHandle</strong> <a class="anchor-link"
            href="#BadHandle"
            title="Permalink to Handle.BadHandle">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int BadHandle = 0xFFFFFFFF;
</pre>
</div>
</div>
<div class="field"><h4 id="IndexMask">
<button class="show-code">Code</button>
const int         <strong>IndexMask</strong> <a class="anchor-link"
            href="#IndexMask"
            title="Permalink to Handle.IndexMask">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int IndexMask = 0xFFFFF;
</pre>
</div>
</div>
<div class="field"><h4 id="IndexShift">
<button class="show-code">Code</button>
const int         <strong>IndexShift</strong> <a class="anchor-link"
            href="#IndexShift"
            title="Permalink to Handle.IndexShift">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int IndexShift = 0;
</pre>
</div>
</div>
<div class="field"><h4 id="SerialMask">
<button class="show-code">Code</button>
const int         <strong>SerialMask</strong> <a class="anchor-link"
            href="#SerialMask"
            title="Permalink to Handle.SerialMask">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int SerialMask = 0xF;
</pre>
</div>
</div>
<div class="field"><h4 id="SerialShift">
<button class="show-code">Code</button>
const int         <strong>SerialShift</strong> <a class="anchor-link"
            href="#SerialShift"
            title="Permalink to Handle.SerialShift">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int SerialShift = 20;
</pre>
</div>
</div>
<div class="field"><h4 id="StatusFreeList">
<button class="show-code">Code</button>
const int         <strong>StatusFreeList</strong> <a class="anchor-link"
            href="#StatusFreeList"
            title="Permalink to Handle.StatusFreeList">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int StatusFreeList = 0x2;
</pre>
</div>
</div>
<div class="field"><h4 id="StatusMask">
<button class="show-code">Code</button>
const int         <strong>StatusMask</strong> <a class="anchor-link"
            href="#StatusMask"
            title="Permalink to Handle.StatusMask">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int StatusMask = 0xF;
</pre>
</div>
</div>
<div class="field"><h4 id="StatusReg">
<button class="show-code">Code</button>
const int         <strong>StatusReg</strong> <a class="anchor-link"
            href="#StatusReg"
            title="Permalink to Handle.StatusReg">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int StatusReg = 0x4;
</pre>
</div>
</div>
<div class="field"><h4 id="StatusShift">
<button class="show-code">Code</button>
const int         <strong>StatusShift</strong> <a class="anchor-link"
            href="#StatusShift"
            title="Permalink to Handle.StatusShift">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int StatusShift = 28;
</pre>
</div>
</div>
<div class="field"><h4 id="StatusUsed">
<button class="show-code">Code</button>
const int         <strong>StatusUsed</strong> <a class="anchor-link"
            href="#StatusUsed"
            title="Permalink to Handle.StatusUsed">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int StatusUsed = 0x1;
</pre>
</div>
</div>
<div class="field"><h4 id="TypeMask">
<button class="show-code">Code</button>
const int         <strong>TypeMask</strong> <a class="anchor-link"
            href="#TypeMask"
            title="Permalink to Handle.TypeMask">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int TypeMask = 0xF;
</pre>
</div>
</div>
<div class="field"><h4 id="TypeShift">
<button class="show-code">Code</button>
const int         <strong>TypeShift</strong> <a class="anchor-link"
            href="#TypeShift"
            title="Permalink to Handle.TypeShift">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static const int TypeShift = 24;
</pre>
</div>
</div>
</div>
<div>
<h3>Static Methods</h3>
<div class="method"><h4 id="getStatus">
<button class="show-code">Code</button>
int <strong>getStatus</strong>(int handle) <a class="anchor-link" href="#getStatus"
              title="Permalink to Handle.getStatus">#</a></h4>
<div class="doc">
<pre class="source">
static int getStatus(int handle) {
 return (handle &gt;&gt; StatusShift) &amp; StatusMask;
}
</pre>
</div>
</div>
<div class="method"><h4 id="getType">
<button class="show-code">Code</button>
int <strong>getType</strong>(int handle) <a class="anchor-link" href="#getType"
              title="Permalink to Handle.getType">#</a></h4>
<div class="doc">
<pre class="source">
static int getType(int handle) {
 return (handle &gt;&gt; TypeShift) &amp; TypeMask;
}
</pre>
</div>
</div>
<div class="method"><h4 id="getSerial">
<button class="show-code">Code</button>
int <strong>getSerial</strong>(int handle) <a class="anchor-link" href="#getSerial"
              title="Permalink to Handle.getSerial">#</a></h4>
<div class="doc">
<pre class="source">
static int getSerial(int handle) {
 return (handle &gt;&gt; SerialShift) &amp; SerialMask;
}
</pre>
</div>
</div>
<div class="method"><h4 id="getIndex">
<button class="show-code">Code</button>
int <strong>getIndex</strong>(int handle) <a class="anchor-link" href="#getIndex"
              title="Permalink to Handle.getIndex">#</a></h4>
<div class="doc">
<pre class="source">
static int getIndex(int handle) {
 return (handle &gt;&gt; IndexShift) &amp; IndexMask;
}
</pre>
</div>
</div>
<div class="method"><h4 id="nextSerial">
<button class="show-code">Code</button>
int <strong>nextSerial</strong>(int handle) <a class="anchor-link" href="#nextSerial"
              title="Permalink to Handle.nextSerial">#</a></h4>
<div class="doc">
<pre class="source">
static int nextSerial(int handle) {
 int index = getIndex(handle);
 int serial = getSerial(handle);
 int type = getType(handle);
 int status = getStatus(handle);

 serial = (serial+1) &amp; SerialMask;
 if (serial == SerialMask) {
   // We skip over SerialMask
   // Currently that leaves about 15 serial numbers
   serial = 0;
 }
 return makeHandle(index, serial, type, status);
}
</pre>
</div>
</div>
<div class="method"><h4 id="setType">
<button class="show-code">Code</button>
int <strong>setType</strong>(int handle, int type) <a class="anchor-link" href="#setType"
              title="Permalink to Handle.setType">#</a></h4>
<div class="doc">
<pre class="source">
static int setType(int handle, int type) {
 int index = getIndex(handle);
 int serial = getSerial(handle);
 int status = getStatus(handle);
 return makeHandle(index, serial, type, status);
}
</pre>
</div>
</div>
<div class="method"><h4 id="setIndex">
<button class="show-code">Code</button>
int <strong>setIndex</strong>(int handle, int index) <a class="anchor-link" href="#setIndex"
              title="Permalink to Handle.setIndex">#</a></h4>
<div class="doc">
<pre class="source">
static int setIndex(int handle, int index) {
 int serial = getSerial(handle);
 int type = getType(handle);
 int status = getStatus(handle);
 return makeHandle(index, serial, type, status);
}
</pre>
</div>
</div>
<div class="method"><h4 id="setStatusFlag">
<button class="show-code">Code</button>
int <strong>setStatusFlag</strong>(int handle, int flag) <a class="anchor-link" href="#setStatusFlag"
              title="Permalink to Handle.setStatusFlag">#</a></h4>
<div class="doc">
<pre class="source">
static int setStatusFlag(int handle, int flag) {
 int bit = flag &lt;&lt; StatusShift;
 return handle|bit;
}
</pre>
</div>
</div>
<div class="method"><h4 id="clearStatusFlag">
<button class="show-code">Code</button>
int <strong>clearStatusFlag</strong>(int handle, int flag) <a class="anchor-link" href="#clearStatusFlag"
              title="Permalink to Handle.clearStatusFlag">#</a></h4>
<div class="doc">
<pre class="source">
static int clearStatusFlag(int handle, int flag) {
 int bit = flag &lt;&lt; StatusShift;
 handle &amp;= ~bit;
 return handle;
}
</pre>
</div>
</div>
<div class="method"><h4 id="checkStatusFlag">
<button class="show-code">Code</button>
bool <strong>checkStatusFlag</strong>(int handle, int flag) <a class="anchor-link" href="#checkStatusFlag"
              title="Permalink to Handle.checkStatusFlag">#</a></h4>
<div class="doc">
<pre class="source">
static bool checkStatusFlag(int handle, int flag) {
 return (Handle.getStatus(handle) &amp; flag) != 0;
}
</pre>
</div>
</div>
<div class="method"><h4 id="makeHandle">
<button class="show-code">Code</button>
int <strong>makeHandle</strong>(int index, int serial, int type, int status) <a class="anchor-link" href="#makeHandle"
              title="Permalink to Handle.makeHandle">#</a></h4>
<div class="doc">
<pre class="source">
static int makeHandle(int index, int serial, int type, int status) {
 index = index &amp; IndexMask;
 index = index &lt;&lt; IndexShift;
 serial = serial &amp; SerialMask;
 serial = serial &lt;&lt; SerialShift;
 type = type &amp; TypeMask;
 type = type &lt;&lt; TypeShift;
 status = status &amp; StatusMask;
 status = status &lt;&lt; StatusShift;
 return index|serial|type|status;
}
</pre>
</div>
</div>
<div class="method"><h4 id="makeStaticHandle">
<button class="show-code">Code</button>
int <strong>makeStaticHandle</strong>(int index, int type, int status) <a class="anchor-link" href="#makeStaticHandle"
              title="Permalink to Handle.makeStaticHandle">#</a></h4>
<div class="doc">
<pre class="source">
static int makeStaticHandle(int index, int type, int status) {
 return makeHandle(index, SerialMask, type, status);
}
</pre>
</div>
</div>
<div class="method"><h4 id="isStaticHandle">
<button class="show-code">Code</button>
bool <strong>isStaticHandle</strong>(int handle) <a class="anchor-link" href="#isStaticHandle"
              title="Permalink to Handle.isStaticHandle">#</a></h4>
<div class="doc">
<pre class="source">
static bool isStaticHandle(int handle) {
 int serial = getSerial(handle);
 return serial == SerialMask;
}
</pre>
</div>
</div>
<div class="method"><h4 id="makeRegisterHandle">
<button class="show-code">Code</button>
int <strong>makeRegisterHandle</strong>(int register) <a class="anchor-link" href="#makeRegisterHandle"
              title="Permalink to Handle.makeRegisterHandle">#</a></h4>
<div class="doc">
<pre class="source">
static int makeRegisterHandle(int register) {
 return makeHandle(register, 0, 0, Handle.StatusReg);
}
</pre>
</div>
</div>
<div class="method"><h4 id="isRegisterHandle">
<button class="show-code">Code</button>
bool <strong>isRegisterHandle</strong>(int handle) <a class="anchor-link" href="#isRegisterHandle"
              title="Permalink to Handle.isRegisterHandle">#</a></h4>
<div class="doc">
<pre class="source">
static bool isRegisterHandle(int handle) {
 return (getStatus(handle) &amp; StatusReg) != 0;
}
</pre>
</div>
</div>
<div class="method"><h4 id="makeNextPointer">
<button class="show-code">Code</button>
int <strong>makeNextPointer</strong>(int serial, int nextIndex) <a class="anchor-link" href="#makeNextPointer"
              title="Permalink to Handle.makeNextPointer">#</a></h4>
<div class="doc">
<pre class="source">
static int makeNextPointer(int serial, int nextIndex) {
 return makeHandle(nextIndex, serial, 0, StatusFreeList);
}
</pre>
</div>
</div>
<div class="method"><h4 id="isNextPointer">
<button class="show-code">Code</button>
bool <strong>isNextPointer</strong>(int handle) <a class="anchor-link" href="#isNextPointer"
              title="Permalink to Handle.isNextPointer">#</a></h4>
<div class="doc">
<pre class="source">
static bool isNextPointer(int handle) {
 int status = getStatus(handle);
 return status == StatusFreeList;
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        
        <div class="footer">
          <div>This page was generated at 2012-11-10 15:19:59.660</div>
        </div>
        <script async src="../client-static.js"></script>
        </body></html>
        
